\hypertarget{redraw_8cpp_source}{}\subsection{redraw.\+cpp}
\label{redraw_8cpp_source}\index{redraw.\+cpp@{redraw.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "\hyperlink{redraw_8h}{redraw.h}"}
00002 
00003 \textcolor{preprocessor}{#include <ogdf/basic/Graph.h>}
00004 \textcolor{preprocessor}{#include <ogdf/layered/SugiyamaLayout.h>}
00005 \textcolor{preprocessor}{#include <ogdf/layered/OptimalRanking.h>}
00006 \textcolor{preprocessor}{#include <ogdf/layered/MedianHeuristic.h>}
00007 \textcolor{preprocessor}{#include <ogdf/layered/OptimalHierarchyLayout.h>}
00008 \textcolor{preprocessor}{#include <ogdf/layered/FastHierarchyLayout.h>}
00009 \textcolor{preprocessor}{#include <ogdf/layered/BarycenterHeuristic.h>}
00010 \textcolor{preprocessor}{#include <ogdf/energybased/MultilevelLayout.h>}
00011 \textcolor{preprocessor}{#include <ogdf/misclayout/BertaultLayout.h>}
00012 
00013 \textcolor{keyword}{using namespace }\hyperlink{namespaceogdf}{ogdf};
00014 
00015 \textcolor{comment}{/*******************************************************************************}
00016 \textcolor{comment}{ * redrawGraph1.}
00017 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{redraw_8cpp_source_l00018}{}\hyperlink{redraw_8h_ae0faf7c4b627874b04cd8fd6d32bc8aa}{00018} \textcolor{keywordtype}{void} \hyperlink{redraw_8cpp_ae0faf7c4b627874b04cd8fd6d32bc8aa}{redrawGraph1}(\hyperlink{class_network}{Network} *network)
00019 \{
00020   Graph G;
00021   QMap<int, node> nodeMap;
00022 
00023   GraphAttributes GA(
00024     G, GraphAttributes::nodeGraphics | GraphAttributes::edgeGraphics |
00025     GraphAttributes::nodeLabel | GraphAttributes::nodeStyle |
00026     GraphAttributes::edgeType | GraphAttributes::edgeArrow |
00027     GraphAttributes::edgeStyle);  \textcolor{comment}{// Create graph attributes for this graph}
00028 
00029   node n;
00030 
00031   \textcolor{keywordflow}{foreach}(\hyperlink{class_bar}{Bar} *bar, network->\hyperlink{class_network_a7fe628f7de34a96235cbd3f2cee4aff2}{bars}) \{
00032     n = G.newNode(bar->\hyperlink{class_bar_a9dc5c6a6d44fe412ae34ef8a881b8dce}{id});
00033     nodeMap.insert(bar->\hyperlink{class_bar_a9dc5c6a6d44fe412ae34ef8a881b8dce}{id},n);
00034   \}
00035 
00036   forall\_nodes(n, G) \{
00037     GA.height(n) = \hyperlink{group___graphics_gaa334bbc93b3fde219840e95e23198b53}{Network::barIconSize};
00038     GA.width(n) = \hyperlink{group___graphics_gaa334bbc93b3fde219840e95e23198b53}{Network::barIconSize};
00039     GA.shape(n) = shRect;
00040   \}
00041 
00042 \textcolor{comment}{//  foreach(Line *line, network->lines) \{}
00043 \textcolor{comment}{//    node noI = nodeMap.value(line->noI);}
00044 \textcolor{comment}{//    node noF = nodeMap.value(line->noF);}
00045 \textcolor{comment}{//    G.newEdge(noI, noF);}
00046 \textcolor{comment}{//  \}}
00047 
00048   edge e;
00049   forall\_edges(e, G) \{
00050     GA.bends(e);
00051     GA.arrowType(e) = eaNone;
00052   \}
00053 
00054   SugiyamaLayout SL;
00055   SL.setRanking(\textcolor{keyword}{new} OptimalRanking);
00056   SL.setCrossMin(\textcolor{keyword}{new} BarycenterHeuristic);
00057   FastHierarchyLayout *fhl = \textcolor{keyword}{new} FastHierarchyLayout;
00058   fhl->layerDistance(40.0);    \textcolor{comment}{// set layer distance to 40.0}
00059   fhl->nodeDistance(20.0); \textcolor{comment}{// set node distance to 20.0.}
00060   SL.setLayout(fhl);
00061   SL.call(GA);
00062 
00063   forall\_nodes(n, G) \{  \textcolor{comment}{// iterate through all the node in the graph}
00064     \textcolor{keywordtype}{double} x = GA.x(n);
00065     \textcolor{keywordtype}{double} y = GA.y(n);
00066     \textcolor{keywordtype}{int} \textcolor{keywordtype}{id} = n->index();
00067     \hyperlink{class_bar}{Bar} *bar = network->\hyperlink{group___graphics_ga9c5806f5a0d236bb6d8abbdce62d9675}{getBarById}(\textcolor{keywordtype}{id});
00068 
00069     \textcolor{keywordflow}{if}(bar == NULL) \{
00070       \textcolor{keywordflow}{while}(1) \{\}
00071     \}
00072 
00073     bar->setPos(y, x);
00074   \}
00075 
00076 \textcolor{comment}{//  network->setSceneRect(network->itemsBoundingRect());}
00077 \}
00078 
00079 \textcolor{comment}{/*******************************************************************************}
00080 \textcolor{comment}{ * redrawGraph2.}
00081 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{redraw_8cpp_source_l00082}{}\hyperlink{redraw_8h_ad9c6f1e3f121ffdcbf70c98d31a442f0}{00082} \textcolor{keywordtype}{void} \hyperlink{redraw_8cpp_ad9c6f1e3f121ffdcbf70c98d31a442f0}{redrawGraph2}(\hyperlink{class_network}{Network} *network)
00083 \{
00084   Graph G;
00085   QMap<int, node> nodeMap;
00086 
00087   GraphAttributes GA(
00088     G, GraphAttributes::nodeGraphics | GraphAttributes::edgeGraphics |
00089     GraphAttributes::nodeLabel | GraphAttributes::nodeStyle |
00090     GraphAttributes::edgeType | GraphAttributes::edgeArrow |
00091     GraphAttributes::edgeStyle);  \textcolor{comment}{// Create graph attributes for this graph}
00092 
00093   node n;
00094   \textcolor{keywordflow}{foreach}(\hyperlink{class_bar}{Bar} *bar, network->\hyperlink{class_network_a7fe628f7de34a96235cbd3f2cee4aff2}{bars}) \{
00095     n = G.newNode(bar->\hyperlink{class_bar_a9dc5c6a6d44fe412ae34ef8a881b8dce}{id});
00096     nodeMap.insert(bar->\hyperlink{class_bar_a9dc5c6a6d44fe412ae34ef8a881b8dce}{id},n);
00097   \}
00098 
00099   forall\_nodes(n, G) \{
00100     GA.height(n) = \hyperlink{group___graphics_gaa334bbc93b3fde219840e95e23198b53}{Network::barIconSize};
00101     GA.width(n) = \hyperlink{group___graphics_gaa334bbc93b3fde219840e95e23198b53}{Network::barIconSize};
00102     GA.shape(n) = shRect;
00103   \}
00104 
00105 \textcolor{comment}{//  foreach(Line *line, network->lines) \{}
00106 \textcolor{comment}{//    node noI = nodeMap.value(line->noI);}
00107 \textcolor{comment}{//    node noF = nodeMap.value(line->noF);}
00108 \textcolor{comment}{//    G.newEdge(noI, noF);}
00109 \textcolor{comment}{//  \}}
00110 
00111   edge e;
00112   forall\_edges(e, G) \{
00113     GA.bends(e);
00114     GA.arrowType(e) = eaNone;
00115   \}
00116 
00117   SugiyamaLayout SL;
00118   SL.setRanking(\textcolor{keyword}{new} OptimalRanking);
00119   SL.setCrossMin(\textcolor{keyword}{new} MedianHeuristic);
00120   OptimalHierarchyLayout *ohl = \textcolor{keyword}{new} OptimalHierarchyLayout;
00121   SL.setLayout(ohl);
00122   SL.call(GA);
00123 
00124   forall\_nodes(n, G) \{  \textcolor{comment}{// iterate through all the node in the graph}
00125     \textcolor{keywordtype}{double} x = GA.x(n);
00126     \textcolor{keywordtype}{double} y = GA.y(n);
00127     \textcolor{keywordtype}{int} \textcolor{keywordtype}{id} = n->index();
00128     \hyperlink{class_bar}{Bar} *bar = network->\hyperlink{group___graphics_ga9c5806f5a0d236bb6d8abbdce62d9675}{getBarById}(\textcolor{keywordtype}{id});
00129 
00130     \textcolor{keywordflow}{if}(bar == NULL) \{
00131       \textcolor{keywordflow}{while}(1) \{\}
00132     \}
00133 
00134     bar->setPos(y, x);
00135   \}
00136 
00137 \textcolor{comment}{//  network->setSceneRect(network->itemsBoundingRect());}
00138 \}
00139 
00140 \textcolor{comment}{/*******************************************************************************}
00141 \textcolor{comment}{ * redrawGraph3.}
00142 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{redraw_8cpp_source_l00143}{}\hyperlink{redraw_8h_a16e73f8fcaf10fb71fc8e7d719db919e}{00143} \textcolor{keywordtype}{void} \hyperlink{redraw_8cpp_a16e73f8fcaf10fb71fc8e7d719db919e}{redrawGraph3}(\hyperlink{class_network}{Network} *network)
00144 \{
00145   Graph G;
00146   QMap<int, node> nodeMap;
00147 
00148   GraphAttributes GA(
00149     G, GraphAttributes::nodeGraphics | GraphAttributes::edgeGraphics |
00150     GraphAttributes::nodeLabel | GraphAttributes::nodeStyle |
00151     GraphAttributes::edgeType | GraphAttributes::edgeArrow |
00152     GraphAttributes::edgeStyle);  \textcolor{comment}{// Create graph attributes for this graph}
00153 
00154   node n;
00155   \textcolor{keywordflow}{foreach}(\hyperlink{class_bar}{Bar} *bar, network->\hyperlink{class_network_a7fe628f7de34a96235cbd3f2cee4aff2}{bars}) \{
00156     n = G.newNode(bar->\hyperlink{class_bar_a9dc5c6a6d44fe412ae34ef8a881b8dce}{id});
00157     nodeMap.insert(bar->\hyperlink{class_bar_a9dc5c6a6d44fe412ae34ef8a881b8dce}{id},n);
00158   \}
00159 
00160   forall\_nodes(n, G) \{
00161     GA.height(n) = \hyperlink{group___graphics_gaa334bbc93b3fde219840e95e23198b53}{Network::barIconSize};
00162     GA.width(n) = \hyperlink{group___graphics_gaa334bbc93b3fde219840e95e23198b53}{Network::barIconSize};
00163     GA.shape(n) = shRect;
00164   \}
00165 
00166 \textcolor{comment}{//  foreach(Line *line, network->lines) \{}
00167 \textcolor{comment}{//    node noI = nodeMap.value(line->noI);}
00168 \textcolor{comment}{//    node noF = nodeMap.value(line->noF);}
00169 \textcolor{comment}{//    G.newEdge(noI, noF);}
00170 \textcolor{comment}{//  \}}
00171 
00172   edge e;
00173   forall\_edges(e, G) \{
00174     GA.bends(e);
00175     GA.arrowType(e) = eaNone;
00176   \}
00177 
00178   MultilevelLayout MLL;
00179   MLL.call( GA );
00180 
00181   forall\_nodes(n, G) \{  \textcolor{comment}{// iterate through all the node in the graph}
00182     \textcolor{keywordtype}{double} x = GA.x(n);
00183     \textcolor{keywordtype}{double} y = GA.y(n);
00184     \textcolor{keywordtype}{int} \textcolor{keywordtype}{id} = n->index();
00185     \hyperlink{class_bar}{Bar} *bar = network->\hyperlink{group___graphics_ga9c5806f5a0d236bb6d8abbdce62d9675}{getBarById}(\textcolor{keywordtype}{id});
00186 
00187     \textcolor{keywordflow}{if}(bar == NULL) \{
00188       \textcolor{keywordflow}{while}(1) \{\}
00189     \}
00190 
00191     bar->setPos(x, y);
00192   \}
00193 
00194 \textcolor{comment}{//  network->setSceneRect(network->itemsBoundingRect());}
00195 \}
\end{DoxyCode}
