\hypertarget{bar_8h_source}{}\subsection{bar.\+h}
\label{bar_8h_source}\index{bar.\+h@{bar.\+h}}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * The MIT License (MIT)}
00003 \textcolor{comment}{ *}
00004 \textcolor{comment}{ * Copyright (c) 2015 David Krepsky}
00005 \textcolor{comment}{ *}
00006 \textcolor{comment}{ * Permission is hereby granted, free of charge, to any person obtaining a copy}
00007 \textcolor{comment}{ * of this software and associated documentation files (the "Software"), to deal}
00008 \textcolor{comment}{ * in the Software without restriction, including without limitation the rights}
00009 \textcolor{comment}{ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell}
00010 \textcolor{comment}{ * copies of the Software, and to permit persons to whom the Software is}
00011 \textcolor{comment}{ * furnished to do so, subject to the following conditions:}
00012 \textcolor{comment}{ *}
00013 \textcolor{comment}{ * The above copyright notice and this permission notice shall be included in}
00014 \textcolor{comment}{ * all copies or substantial portions of the Software.}
00015 \textcolor{comment}{ *}
00016 \textcolor{comment}{ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}
00017 \textcolor{comment}{ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}
00018 \textcolor{comment}{ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}
00019 \textcolor{comment}{ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}
00020 \textcolor{comment}{ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}
00021 \textcolor{comment}{ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE}
00022 \textcolor{comment}{ * SOFTWARE.}
00023 \textcolor{comment}{ */}
00024 
00043 \textcolor{preprocessor}{#ifndef MODELS\_BAR\_H}
00044 \textcolor{preprocessor}{#define MODELS\_BAR\_H}
00045 
00046 \textcolor{preprocessor}{#include <QJsonObject>}
00047 \textcolor{preprocessor}{#include <QGraphicsObject>}
00048 \textcolor{preprocessor}{#include <QPointer>}
00049 \textcolor{preprocessor}{#include <complex>}
00050 \textcolor{preprocessor}{#include "\hyperlink{unit_8h}{unit.h}"}
00051 \textcolor{preprocessor}{#include "\hyperlink{line_8h}{models/line.h}"}
00052 \textcolor{preprocessor}{#include "\hyperlink{network_8h}{models/network.h}"}
00053 \textcolor{preprocessor}{#include "\hyperlink{infobar_8h}{graphics/infobar.h}"}
00054 
00055 QT\_BEGIN\_NAMESPACE
00056 \textcolor{keyword}{class }\hyperlink{class_line}{Line};
00057 \textcolor{keyword}{class }\hyperlink{class_network}{Network};
00058 \textcolor{keyword}{class }\hyperlink{class_info_bar}{InfoBar};
00059 QT\_END\_NAMESPACE
00060 
00061 \textcolor{keyword}{using} std::complex;
00062 
\hypertarget{bar_8h_source_l00134}{}\hyperlink{class_bar}{00134} \textcolor{keyword}{class }\hyperlink{class_bar}{Bar} : \textcolor{keyword}{public} QGraphicsObject
00135 \{
00136   Q\_OBJECT
00137 
00138 \textcolor{keyword}{public}:
00139   \textcolor{comment}{/*****************************************************************************}
00140 \textcolor{comment}{   * Public Constants.}
00141 \textcolor{comment}{   ****************************************************************************/}
\hypertarget{bar_8h_source_l00148}{}\hyperlink{group___models_ga9919592c0397ed41448dfb20b607d738}{00148}   \textcolor{keyword}{static} \textcolor{keyword}{const} int32\_t \hyperlink{group___models_ga9919592c0397ed41448dfb20b607d738}{kInvalidId};
00149 
00150   \textcolor{comment}{/*****************************************************************************}
00151 \textcolor{comment}{   * Public data.}
00152 \textcolor{comment}{   ****************************************************************************/}
\hypertarget{bar_8h_source_l00165}{}\hyperlink{class_bar_a5aabf1f4ac22e20e9cb702a3a7e08eea}{00165}   QVector<QPointer<Line>> \hyperlink{class_bar_a5aabf1f4ac22e20e9cb702a3a7e08eea}{lines};
00166 
00167   \textcolor{comment}{/*****************************************************************************}
00168 \textcolor{comment}{   * Public methods.}
00169 \textcolor{comment}{   ****************************************************************************/}
00175   \hyperlink{group___models_ga9cae2188fcc6cce41caa7898c64548d1}{Bar}();
00176 
00183   \hyperlink{group___models_ga9c7ebea0c189423591741ac438985316}{~Bar}();
00184 
00199   int32\_t \hyperlink{group___models_gacf0fb781a73856bb7beb823304465e13}{id}();
00200 
00208   \textcolor{keywordtype}{void} \hyperlink{group___models_gae3cf341a76cc4589fe3203d0a3ed2ac0}{setBarId}(int32\_t \textcolor{keywordtype}{id});
00209 
00217   \hyperlink{class_network}{Network} *\hyperlink{group___models_gab0594d5d7313e8749bb85434b255db9a}{network}();
00218 
00226   \textcolor{keywordtype}{void} \hyperlink{group___models_gade9a307fdb6a81871787899ec1af5833}{setNetwork}(\hyperlink{class_network}{Network} *\hyperlink{group___models_gab0594d5d7313e8749bb85434b255db9a}{network});
00227 
00238   complex<double> \hyperlink{group___models_gab3ed62a7f2eb9c41a0b84543f1ef8d3b}{v}(int8\_t phase, \hyperlink{class_unit_a55b07dfa9457e1eca2c7194fe0cfc3c1}{Unit::VoltageUnit} unit = 
      \hyperlink{class_unit_a55b07dfa9457e1eca2c7194fe0cfc3c1ab44b1310b59fdcdc9df5bbea91da4206}{Unit::kVoltsPerUnit});
00239 
00249   \textcolor{keywordtype}{void} \hyperlink{group___models_ga8d1e70b2d11ed4245e81b8b20858079d}{setV}(int8\_t phase, complex<double> newVoltage,
00250             \hyperlink{class_unit_a55b07dfa9457e1eca2c7194fe0cfc3c1}{Unit::VoltageUnit} unit = \hyperlink{class_unit_a55b07dfa9457e1eca2c7194fe0cfc3c1ab44b1310b59fdcdc9df5bbea91da4206}{Unit::kVoltsPerUnit});
00251 
00263   complex<double> \hyperlink{group___models_gac020fff2f22a9caab71f21205b5773f8}{sh}(int8\_t phase, \hyperlink{class_unit_ace265ae255370ccacfd5370337572c3b}{Unit::PowerUnit} unit = 
      \hyperlink{class_unit_ace265ae255370ccacfd5370337572c3bae056e80d620a87c61a44c359e6b05cc1}{Unit::kVaPerUnit});
00264 
00275   \textcolor{keywordtype}{void} \hyperlink{group___models_gafd91c7f15566b9d5a68a197efeaeaf26}{setSh}(int8\_t phase, complex<double> newPower,
00276              \hyperlink{class_unit_ace265ae255370ccacfd5370337572c3b}{Unit::PowerUnit} unit = \hyperlink{class_unit_ace265ae255370ccacfd5370337572c3bae056e80d620a87c61a44c359e6b05cc1}{Unit::kVaPerUnit});
00277 
00289   complex<double> \hyperlink{group___models_ga9af07eb85c2c76eb3bc73e25bb842c1e}{si}(int8\_t phase, \hyperlink{class_unit_ace265ae255370ccacfd5370337572c3b}{Unit::PowerUnit} unit = 
      \hyperlink{class_unit_ace265ae255370ccacfd5370337572c3bae056e80d620a87c61a44c359e6b05cc1}{Unit::kVaPerUnit});
00290 
00301   \textcolor{keywordtype}{void} \hyperlink{group___models_ga85e2a9b8a281900333fd65d1b532acfd}{setSi}(int8\_t phase, complex<double> newPower,
00302              \hyperlink{class_unit_ace265ae255370ccacfd5370337572c3b}{Unit::PowerUnit} unit = \hyperlink{class_unit_ace265ae255370ccacfd5370337572c3bae056e80d620a87c61a44c359e6b05cc1}{Unit::kVaPerUnit});
00303 
00314   complex<double> \hyperlink{group___models_ga6c83eb997f5038e0b9bbd5472582e0a8}{rV}(int8\_t phase, \hyperlink{class_unit_a55b07dfa9457e1eca2c7194fe0cfc3c1}{Unit::VoltageUnit} unit = 
      \hyperlink{class_unit_a55b07dfa9457e1eca2c7194fe0cfc3c1ab44b1310b59fdcdc9df5bbea91da4206}{Unit::kVoltsPerUnit});
00315 
00325   \textcolor{keywordtype}{void} \hyperlink{group___models_ga96ab396a6e953a0356f60adb1784ee37}{setRV}(int8\_t phase, complex<double> resultVoltage,
00326              \hyperlink{class_unit_a55b07dfa9457e1eca2c7194fe0cfc3c1}{Unit::VoltageUnit} unit = \hyperlink{class_unit_a55b07dfa9457e1eca2c7194fe0cfc3c1ab44b1310b59fdcdc9df5bbea91da4206}{Unit::kVoltsPerUnit});
00327 
00338   complex<double> \hyperlink{group___models_ga50eb46f3510205a9d6cb5e6547fa86df}{rI}(int8\_t phase,
00339                      \hyperlink{class_unit_a0794cf6c9682f48296dd4a5315389787}{Unit::CurrentUnit} unit = 
      \hyperlink{class_unit_a0794cf6c9682f48296dd4a5315389787aeed3b50e464d581cb630181a3b6a0709}{Unit::kAmperePerUnit});
00340 
00350   \textcolor{keywordtype}{void} \hyperlink{group___models_gaf7a406f8952b1e874c95c41b0955d250}{setRI}(int8\_t phase, complex<double> resultCurrent,
00351              \hyperlink{class_unit_a0794cf6c9682f48296dd4a5315389787}{Unit::CurrentUnit} unit = \hyperlink{class_unit_a0794cf6c9682f48296dd4a5315389787aeed3b50e464d581cb630181a3b6a0709}{Unit::kAmperePerUnit});
00352 
00358   \textcolor{keywordtype}{void} \hyperlink{group___models_gabb1a3b7653d4e2327c4bf728210f197e}{addLine}(QPointer<Line> line);
00359 
00365   \textcolor{keywordtype}{void} \hyperlink{group___models_gaec9faaf687415c27cd1d0527e1b94504}{removeLine}(QPointer<Line> line);
00366 
00370   \textcolor{keywordtype}{void} \hyperlink{group___models_ga4ea1a2074cb45968d80d6add571884a4}{removeLines}();
00371 
00377   QJsonObject \hyperlink{group___models_ga3eb84c42b687db6cd98e11b8bd38c86e}{toJson}();
00378 
00384   \textcolor{keywordtype}{void} \hyperlink{group___models_ga1df62f03dd3a066ceaf6588ba6bb6004}{fromJson}(QJsonObject &jsonBar);
00385 
00394   QRectF \hyperlink{group___models_ga8279d8109019cc7e139e2023690496be}{boundingRect}() const Q\_DECL\_OVERRIDE;
00395 
00396 signals:
00397   \textcolor{comment}{/*****************************************************************************}
00398 \textcolor{comment}{  * Signals.}
00399 \textcolor{comment}{  *****************************************************************************/}
00405   \textcolor{keywordtype}{void} \hyperlink{class_bar_a66bcbd19582dddee7e171ae5a4475f4b}{eventDoubleClick}();
00406 
00407 protected:
00408   \textcolor{comment}{/*****************************************************************************}
00409 \textcolor{comment}{  * Protected methods.}
00410 \textcolor{comment}{  *****************************************************************************/}
00419   \textcolor{keywordtype}{void} \hyperlink{group___models_ga1945e7b4401fa9ad7475274d9fb12a72}{mouseDoubleClickEvent}(QGraphicsSceneMouseEvent *event);
00420 
00431   QVariant \hyperlink{group___models_gad97a82d618ee0c51a9a36e44339c69e6}{itemChange}(GraphicsItemChange change,
00432                       const QVariant &value) Q\_DECL\_OVERRIDE;
00433 
00444   \textcolor{keywordtype}{void} \hyperlink{group___models_gacbb6dbac607412c9c1f9dfcd0cd4d432}{paint}(QPainter *painter, const QStyleOptionGraphicsItem *option,
00445              QWidget *widget) Q\_DECL\_OVERRIDE;
00446 
00447 private:
00448   \textcolor{comment}{/*****************************************************************************}
00449 \textcolor{comment}{  * Private data.}
00450 \textcolor{comment}{  *****************************************************************************/}
00454   int32\_t id\_;
00455 
00463   QPointer<\hyperlink{class_network}{Network}> network\_;
00464 
00472   \hyperlink{class_info_bar}{InfoBar} *infoBar;
00473 
00479   complex<\textcolor{keywordtype}{double}> v\_[3];
00480 
00487   complex<\textcolor{keywordtype}{double}> sh\_[3];
00488 
00494   complex<\textcolor{keywordtype}{double}> si\_[3];
00495 
00501   complex<\textcolor{keywordtype}{double}> rV\_[3];
00502 
00508   complex<\textcolor{keywordtype}{double}> rI\_[3];
00509 
00513   QGraphicsTextItem barLabel;
00514 
00515   \textcolor{comment}{/*****************************************************************************}
00516 \textcolor{comment}{  * Private methods.}
00517 \textcolor{comment}{  *****************************************************************************/}
00524   \textcolor{keywordtype}{void} showInfo();
00525 
00531   \textcolor{keywordtype}{void} hideInfo();
00532 
00541   \textcolor{keywordtype}{void} drawSlack(QPainter *painter);
00542 
00550   \textcolor{keywordtype}{void} drawPq(QPainter *painter);
00551 \};
00552 
00553 \textcolor{preprocessor}{#endif  // MODELS\_BAR\_H}
00554 
\end{DoxyCode}
