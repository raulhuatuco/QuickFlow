\hypertarget{quickflow_8cpp_source}{}\subsection{quickflow.\+cpp}
\label{quickflow_8cpp_source}\index{quickflow.\+cpp@{quickflow.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * The MIT License (MIT)}
00003 \textcolor{comment}{ *}
00004 \textcolor{comment}{ * Copyright (c) 2015 David Krepsky}
00005 \textcolor{comment}{ *}
00006 \textcolor{comment}{ * Permission is hereby granted, free of charge, to any person obtaining a copy}
00007 \textcolor{comment}{ * of this software and associated documentation files (the "Software"), to deal}
00008 \textcolor{comment}{ * in the Software without restriction, including without limitation the rights}
00009 \textcolor{comment}{ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell}
00010 \textcolor{comment}{ * copies of the Software, and to permit persons to whom the Software is}
00011 \textcolor{comment}{ * furnished to do so, subject to the following conditions:}
00012 \textcolor{comment}{ *}
00013 \textcolor{comment}{ * The above copyright notice and this permission notice shall be included in}
00014 \textcolor{comment}{ * all copies or substantial portions of the Software.}
00015 \textcolor{comment}{ *}
00016 \textcolor{comment}{ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}
00017 \textcolor{comment}{ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}
00018 \textcolor{comment}{ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}
00019 \textcolor{comment}{ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}
00020 \textcolor{comment}{ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}
00021 \textcolor{comment}{ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE}
00022 \textcolor{comment}{ * SOFTWARE.}
00023 \textcolor{comment}{ */}
00024 
00043 \textcolor{preprocessor}{#include "\hyperlink{quickflow_8h}{quickflow.h}"}
00044 \textcolor{preprocessor}{#include "ui\_quickflow.h"}
00045 
00046 
00047 \textcolor{preprocessor}{#include "\hyperlink{newproject_8h}{window/newproject.h}"}
00048 \textcolor{preprocessor}{#include "\hyperlink{networkproperties_8h}{window/networkproperties.h}"}
00049 \textcolor{preprocessor}{#include "\hyperlink{barproperties_8h}{window/barproperties.h}"}
00050 \textcolor{preprocessor}{#include "\hyperlink{lineproperties_8h}{window/lineproperties.h}"}
00051 \textcolor{preprocessor}{#include "\hyperlink{about_8h}{window/about.h}"}
00052 \textcolor{preprocessor}{#include "\hyperlink{searchbar_8h}{window/searchbar.h}"}
00053 
00054 \textcolor{preprocessor}{#include "\hyperlink{bar_8h}{models/bar.h}"}
00055 \textcolor{preprocessor}{#include "\hyperlink{line_8h}{models/line.h}"}
00056 \textcolor{preprocessor}{#include "\hyperlink{network_8h}{models/network.h}"}
00057 
00058 \textcolor{preprocessor}{#include "\hyperlink{import_8h}{algorithms/import.h}"}
00059 \textcolor{preprocessor}{#include "\hyperlink{redrawnetwork_8h}{algorithms/redrawnetwork.h}"}
00060 \textcolor{preprocessor}{#include "\hyperlink{shirmoharmmadi_8h}{algorithms/shirmoharmmadi.h}"}
00061 
00062 \textcolor{comment}{/*****************************************************************************}
00063 \textcolor{comment}{* Const.}
00064 \textcolor{comment}{*****************************************************************************/}
00065 \textcolor{keyword}{const} QString \hyperlink{group___window_gabfc3b1280bdae9a9c046d56b1459ab99}{QuickFlow::kVersion} = \textcolor{stringliteral}{"0.0.5"};
00066 
00067 \textcolor{comment}{/*******************************************************************************}
00068 \textcolor{comment}{ * Constructor.}
00069 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{quickflow_8cpp_source_l00070}{}\hyperlink{group___window_ga7689e2608835392fce3f4c95a7a542db}{00070} \hyperlink{group___window_ga7689e2608835392fce3f4c95a7a542db}{QuickFlow::QuickFlow}(QWidget *parent)
00071   : QMainWindow(parent),
00072     ui(new \hyperlink{namespace_ui}{Ui}::\hyperlink{class_quick_flow}{QuickFlow}),
00073     project(NULL),
00074     altered\_ (false)
00075 \{
00076   \textcolor{comment}{// Set-up user interface.}
00077   ui->setupUi(\textcolor{keyword}{this});
00078 
00079   \textcolor{comment}{// Adjust initial interface to disable project related actions.}
00080   noProjectInterface();
00081 
00082   \textcolor{comment}{// Set application info.}
00083   QCoreApplication::setOrganizationName(\textcolor{stringliteral}{"DKrepsky"});
00084   QCoreApplication::setOrganizationDomain(\textcolor{stringliteral}{"dkrepsky.blogspot.com.br"});
00085   QCoreApplication::setApplicationName(\textcolor{stringliteral}{"QuickFlow"});
00086   QCoreApplication::setApplicationVersion(\hyperlink{group___window_gabfc3b1280bdae9a9c046d56b1459ab99}{kVersion});
00087 
00088   \textcolor{comment}{// Check for settings existence and version.}
00089   settings = \textcolor{keyword}{new} QSettings(\textcolor{keyword}{this});
00090 
00091   \textcolor{keywordflow}{if} (settings->contains(\textcolor{stringliteral}{"version"})) \{
00092     \textcolor{keywordflow}{if} (settings->value(\textcolor{stringliteral}{"version"}).toString() == \hyperlink{group___window_gabfc3b1280bdae9a9c046d56b1459ab99}{kVersion})
00093       \textcolor{comment}{// If exists and is in the current version, use it.}
00094       loadSettings();
00095     \textcolor{keywordflow}{else}
00096       \textcolor{comment}{// Update to the new program version.}
00097       upgradeSettings();
00098   \} \textcolor{keywordflow}{else} \{
00099     \textcolor{comment}{// If there is no settings availiable, create a new one with default values.}
00100     createSettings();
00101   \}
00102 
00103   connectSignals();
00104 \}
00105 
00106 \textcolor{comment}{/*******************************************************************************}
00107 \textcolor{comment}{ * Destructor.}
00108 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{quickflow_8cpp_source_l00109}{}\hyperlink{group___window_ga985823a0db64246b3a15eed2f397e0a4}{00109} \hyperlink{group___window_ga985823a0db64246b3a15eed2f397e0a4}{QuickFlow::~QuickFlow}()
00110 \{
00111   disconnectSignals();
00112   \textcolor{keyword}{delete} ui;
00113 \}
00114 
00115 \textcolor{comment}{/*******************************************************************************}
00116 \textcolor{comment}{ * Is altered.}
00117 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{quickflow_8cpp_source_l00118}{}\hyperlink{group___window_ga5d9148467ef65c48419bf020ee107a45}{00118} \textcolor{keywordtype}{bool} \hyperlink{group___window_ga5d9148467ef65c48419bf020ee107a45}{QuickFlow::isAltered}()
00119 \{
00120   \textcolor{keywordflow}{return} altered\_;
00121 \}
00122 
00123 \textcolor{comment}{/*******************************************************************************}
00124 \textcolor{comment}{ * Set altered.}
00125 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{quickflow_8cpp_source_l00126}{}\hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{00126} \textcolor{keywordtype}{void} \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{QuickFlow::setAltered}(\textcolor{keywordtype}{bool} altered)
00127 \{
00128   altered\_ = altered;
00129 
00130   \textcolor{keywordflow}{if}(altered\_) \{
00131     ui->actionSave->setEnabled(\textcolor{keyword}{true});
00132     \textcolor{comment}{// Change window title to indicate that the project is altered.}
00133     setWindowTitle(\textcolor{stringliteral}{"QkFlow - *"} + project->\hyperlink{class_project_a82dd2d1bc38f9fd08c9a811fcaa76b38}{name});
00134   \} \textcolor{keywordflow}{else} \{
00135     ui->actionSave->setEnabled(\textcolor{keyword}{false});
00136     \textcolor{comment}{// Change window title to indicate that the project has been saved.}
00137     setWindowTitle(\textcolor{stringliteral}{"QkFlow - "} + project->\hyperlink{class_project_a82dd2d1bc38f9fd08c9a811fcaa76b38}{name});
00138   \}
00139 \}
00140 
00141 \textcolor{comment}{/*******************************************************************************}
00142 \textcolor{comment}{ * Zoom in action.}
00143 \textcolor{comment}{ ******************************************************************************/}
00144 \textcolor{keywordtype}{void} QuickFlow::on\_actionZoomIn\_triggered()
00145 \{
00146   ui->systemView->zoomIn();
00147 \}
00148 
00149 \textcolor{comment}{/*******************************************************************************}
00150 \textcolor{comment}{ * Zoom out action.}
00151 \textcolor{comment}{ ******************************************************************************/}
00152 \textcolor{keywordtype}{void} QuickFlow::on\_actionZoomOut\_triggered()
00153 \{
00154   ui->systemView->zoomOut();
00155 \}
00156 
00157 \textcolor{comment}{/*******************************************************************************}
00158 \textcolor{comment}{ * Zoom fit action.}
00159 \textcolor{comment}{ ******************************************************************************/}
00160 \textcolor{keywordtype}{void} QuickFlow::on\_actionZoomFit\_triggered()
00161 \{
00162   ui->systemView->zoomFit();
00163 \}
00164 
00165 \textcolor{comment}{/*******************************************************************************}
00166 \textcolor{comment}{ * Exit action.}
00167 \textcolor{comment}{ ******************************************************************************/}
00168 \textcolor{keywordtype}{void} QuickFlow::on\_actionExit\_triggered()
00169 \{
00170   close();
00171 \}
00172 
00173 \textcolor{comment}{/*******************************************************************************}
00174 \textcolor{comment}{ * New project action.}
00175 \textcolor{comment}{ ******************************************************************************/}
00176 \textcolor{keywordtype}{void} QuickFlow::on\_actionNew\_triggered()
00177 \{
00178   \textcolor{comment}{// Check if there is a project already opened.}
00179   \textcolor{keywordflow}{if} (project != NULL) \{
00180     \textcolor{comment}{// Close project}
00181     ui->actionClose->trigger();
00182 
00183     \textcolor{comment}{// If close didnt succed, cancel new project.}
00184     \textcolor{keywordflow}{if} (project != NULL) \textcolor{keywordflow}{return};
00185   \}
00186 
00187   \textcolor{comment}{// Open New Project window and gather the project settings.}
00188   \textcolor{comment}{// NOTE: windowNewProject MUST provide valid data.}
00189   \hyperlink{class_new_project}{NewProject} newProject(\textcolor{keyword}{this});
00190 
00191   \textcolor{comment}{// If canceled return}
00192   \textcolor{keywordflow}{if} (newProject.exec() != QDialog::Accepted) \{
00193     \textcolor{keywordflow}{return};
00194   \}
00195 
00196   \textcolor{comment}{// Create project object and fill settings.}
00197   project = \textcolor{keyword}{new} \hyperlink{class_project}{Project};
00198   project->\hyperlink{class_project_a82dd2d1bc38f9fd08c9a811fcaa76b38}{name} = newProject.dataName;
00199   project->\hyperlink{class_project_a79f30adcefd0b72bd4ac7db724bc9531}{filePath} = newProject.dataPath + QDir::separator() +
00200                       newProject.dataName + \textcolor{stringliteral}{".qkf"};
00201 
00202   \textcolor{comment}{// Simulation data.}
00203   project->\hyperlink{class_project_af2046a5d542d3e3dd51cb9cb04604e8f}{setMaxIterations}(newProject.dataMaxIterations);
00204   project->\hyperlink{class_project_a2cb776c39adb42a1113bf7887d0d4636}{setMinError}(newProject.dataMinError);
00205   project->\hyperlink{class_project_a494c3e89851f754188c7abaedbf77ef6}{setVoltageBase}(newProject.dataVoltageBase);
00206   project->\hyperlink{class_project_abb4df805b3cd3af509a41e657eb4bb83}{setPowerBase}(newProject.dataPowerBase);
00207 
00208   \textcolor{comment}{// Units.}
00209   project->\hyperlink{class_project_a846ee2284b0856d461b35d78d9f8e1d6}{setLengthUn}(newProject.dataLengthUnit);
00210   project->\hyperlink{class_project_a995d050781923522ae2a02728346d199}{setImpedanceUn}(newProject.dataImpedanceUnit);
00211   project->\hyperlink{class_project_aa26b488b2e93c8a8c6b4423ce07df4a1}{setVoltageUn}(newProject.dataVoltageUnit);
00212   project->\hyperlink{class_project_aa46b8645d2047c1a2e8d329b9ebbc120}{setPowerUn}(newProject.dataPowerUnit);
00213   project->\hyperlink{class_project_a64d9800bc3acafcfa4d3f45ee5aacc6d}{setCurrentUnit}(newProject.dataCurrentUnit);
00214 
00215   \textcolor{comment}{// Try to save project.}
00216   \textcolor{keywordtype}{bool} save\_ok = project->\hyperlink{class_project_a596a875bc5be73bc5b1b71b6448c1e07}{save}();
00217 
00218   \textcolor{keywordflow}{if} (!save\_ok) \{
00219     QMessageBox::critical(\textcolor{keyword}{this}, \textcolor{stringliteral}{"File write error"},
00220                           \textcolor{stringliteral}{"Cannot write .qkf file."}, QMessageBox::Ok);
00221     \textcolor{keyword}{delete} project;
00222     project = NULL;
00223     \textcolor{keywordflow}{return};
00224   \}
00225 
00226   \textcolor{comment}{// New project is Ok}
00227   \textcolor{comment}{// Change window title to indicate that the project is open}
00228   setWindowTitle(\textcolor{stringliteral}{"QkFlow - "} + newProject.dataName);
00229   \textcolor{comment}{// Enable interface}
00230   workInterface();
00231 \}
00232 
00233 \textcolor{comment}{/*******************************************************************************}
00234 \textcolor{comment}{ * Open project action.}
00235 \textcolor{comment}{ ******************************************************************************/}
00236 \textcolor{keywordtype}{void} QuickFlow::on\_actionOpen\_triggered()
00237 \{
00238   \textcolor{comment}{// Check if there is a project already opened.}
00239   \textcolor{keywordflow}{if} (project != NULL) \{
00240     \textcolor{comment}{// Close project.}
00241     ui->actionClose->trigger();
00242 
00243     \textcolor{comment}{// If close didnt succed, cancel new project.}
00244     \textcolor{keywordflow}{if} (project != NULL) \textcolor{keywordflow}{return};
00245   \}
00246 
00247   \textcolor{comment}{// Open file dialog to select the project file.}
00248   QFileDialog projectFile(\textcolor{keyword}{this});
00249   projectFile.setFileMode(QFileDialog::ExistingFile);
00250   projectFile.setAcceptMode(QFileDialog::AcceptOpen);
00251   projectFile.setNameFilter(tr(\textcolor{stringliteral}{"QkFlow Project (*.qkf)"}));
00252   projectFile.setDirectory(QStandardPaths::standardLocations(
00253                              QStandardPaths::HomeLocation)[0]);
00254 
00255   \textcolor{comment}{// Check if user has canceled the opening.}
00256   \textcolor{keywordflow}{if} (projectFile.exec() != QDialog::Accepted) \{
00257     \textcolor{keywordflow}{return};
00258   \}
00259 
00260   \textcolor{comment}{// Grab filename.}
00261   QString fileName = projectFile.selectedFiles()[0];
00262 
00263   \textcolor{comment}{// Create project object and load from file.}
00264   project = \textcolor{keyword}{new} \hyperlink{class_project}{Project};
00265   project->\hyperlink{class_project_a79f30adcefd0b72bd4ac7db724bc9531}{filePath} = fileName;
00266 
00267   \textcolor{keywordflow}{if} (project->\hyperlink{class_project_a1e373892a0383371132ce68fa5f8813d}{load}() != \textcolor{keyword}{true}) \{
00268     QMessageBox::critical(\textcolor{keyword}{this}, \textcolor{stringliteral}{"File read error"}, \textcolor{stringliteral}{"Cannot read .qkf file."},
00269                           QMessageBox::Ok);
00270     \textcolor{keyword}{delete} project;
00271     project = NULL;
00272     \textcolor{keywordflow}{return};
00273   \}
00274 
00275   \textcolor{comment}{// New project is Ok.}
00276   \textcolor{comment}{// Change window title to indicate that the project is open.}
00277   setWindowTitle(\textcolor{stringliteral}{"QkFlow - "} + project->\hyperlink{class_project_a82dd2d1bc38f9fd08c9a811fcaa76b38}{name});
00278   \textcolor{comment}{// Enable interface.}
00279   workInterface();
00280 
00281   \textcolor{comment}{// Add networks}
00282   \textcolor{keywordflow}{foreach}(\hyperlink{class_network}{Network} *network, project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}) \{
00283     ui->systemView->addNetwork(network);
00284   \}
00285 \}
00286 
00287 \textcolor{comment}{/*******************************************************************************}
00288 \textcolor{comment}{ * Save project action.}
00289 \textcolor{comment}{ ******************************************************************************/}
00290 \textcolor{keywordtype}{void} QuickFlow::on\_actionSave\_triggered()
00291 \{
00292   \textcolor{comment}{// Check for alterations}
00293   \textcolor{keywordflow}{if} (altered\_) \{
00294     \textcolor{keywordflow}{if} (project->\hyperlink{class_project_a596a875bc5be73bc5b1b71b6448c1e07}{save}() != \textcolor{keyword}{true}) \{
00295       QMessageBox::critical(\textcolor{keyword}{this}, \textcolor{stringliteral}{"Write to file failed"},
00296                             \textcolor{stringliteral}{"Cannot save project."}, QMessageBox::Ok);
00297       \textcolor{keywordflow}{return};
00298     \}
00299   \}
00300 
00301   \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{false});
00302 \}
00303 
00304 \textcolor{comment}{/*******************************************************************************}
00305 \textcolor{comment}{ * Save project as action.}
00306 \textcolor{comment}{ ******************************************************************************/}
00307 \textcolor{keywordtype}{void} QuickFlow::on\_actionSave\_as\_triggered()
00308 \{
00309   \textcolor{comment}{// Get file location from user.}
00310   QFileDialog projectFile(\textcolor{keyword}{this});
00311   projectFile.setAcceptMode(QFileDialog::AcceptSave);
00312   projectFile.setNameFilter(tr(\textcolor{stringliteral}{"QkFlow Project (*.qkf)"}));
00313   projectFile.setDirectory(QStandardPaths::standardLocations(
00314                              QStandardPaths::HomeLocation)[0]);
00315 
00316   \textcolor{comment}{// Check if user has canceled the opening.}
00317   \textcolor{keywordflow}{if} (projectFile.exec() != QDialog::Accepted) \{
00318     \textcolor{keywordflow}{return};
00319   \}
00320 
00321   \textcolor{comment}{// Grab filename.}
00322   QString filePath = projectFile.selectedFiles()[0];
00323 
00324   \textcolor{comment}{// Try to save.}
00325   \textcolor{keywordflow}{if} (project->\hyperlink{class_project_ad32a31d548ad38f4cbbe0f95879a68e5}{saveAs}(filePath) != \textcolor{keyword}{true}) \{
00326     QMessageBox::critical(\textcolor{keyword}{this}, \textcolor{stringliteral}{"Write to file failed"},
00327                           \textcolor{stringliteral}{"Cannot save project."}, QMessageBox::Ok);
00328     \textcolor{keywordflow}{return};
00329   \}
00330 
00331   \textcolor{comment}{// Adjust Project settings.}
00332   project->\hyperlink{class_project_a79f30adcefd0b72bd4ac7db724bc9531}{filePath} = filePath;
00333 
00334   \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{false});
00335 \}
00336 
00337 \textcolor{comment}{/*******************************************************************************}
00338 \textcolor{comment}{* Close project action.}
00339 \textcolor{comment}{******************************************************************************/}
00340 \textcolor{keywordtype}{void} QuickFlow::on\_actionClose\_triggered()
00341 \{
00342   \textcolor{comment}{// Check if project is open}
00343   \textcolor{keywordflow}{if} (project == NULL) \{
00344     \textcolor{comment}{// Disable interface and return}
00345     noProjectInterface();
00346     \textcolor{keywordflow}{return};
00347   \}
00348 
00349   \textcolor{comment}{// A project is open. Check for alterations and try to save.}
00350   \textcolor{comment}{// Check whether it does need to save the project or not}
00351   \textcolor{keywordflow}{if} (altered\_) \{
00352     \textcolor{comment}{// Ask user to discard changes}
00353     \textcolor{keywordtype}{int} button = QMessageBox::question(
00354                    \textcolor{keyword}{this}, \textcolor{stringliteral}{"Save"}, \textcolor{stringliteral}{"There are unsaved changes, save it?"},
00355                    QMessageBox::Discard | QMessageBox::Cancel | QMessageBox::Save);
00356 
00357     \textcolor{comment}{// User wants to save}
00358     \textcolor{keywordflow}{if} (button == QMessageBox::Save) \{
00359       \textcolor{comment}{// Try to save}
00360       ui->actionSave->trigger();
00361 
00362       \textcolor{comment}{// Check if save is Ok}
00363       \textcolor{keywordflow}{if} (altered\_) \{
00364         \textcolor{comment}{// User canceled}
00365         \textcolor{keywordflow}{return};
00366       \}
00367     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (button == QMessageBox::Cancel) \{
00368       \textcolor{comment}{// User canceled}
00369       \textcolor{keywordflow}{return};
00370     \}
00371   \}
00372 
00373   \textcolor{keywordflow}{foreach}(\hyperlink{class_network}{Network} *network, project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}) \{
00374     ui->systemView->removeNetwork(network);
00375   \}
00376 
00377   ui->systemView->zoomFit();
00378 
00379   \textcolor{keyword}{delete} project;
00380   project = NULL;
00381   altered\_ = \textcolor{keyword}{false};
00382   noProjectInterface();
00383   setWindowTitle(\textcolor{stringliteral}{"QuickFlow"});
00384 \}
00385 
00386 
00387 \textcolor{comment}{/*******************************************************************************}
00388 \textcolor{comment}{* Add network action.}
00389 \textcolor{comment}{******************************************************************************/}
00390 \textcolor{keywordtype}{void} QuickFlow::on\_actionAdd\_Network\_triggered()
00391 \{
00392   \hyperlink{class_network_properties}{NetworkProperties} newNetwork(\textcolor{keyword}{this});
00393   newNetwork.setOptions(project, NULL);
00394 
00395   \textcolor{keywordflow}{if} (newNetwork.exec() == QDialog::Accepted) \{
00396     \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00397   \}
00398 \}
00399 
00400 \textcolor{comment}{/*******************************************************************************}
00401 \textcolor{comment}{ * Add bar action.}
00402 \textcolor{comment}{ ******************************************************************************/}
00403 \textcolor{keywordtype}{void} QuickFlow::on\_actionAddBar\_triggered()
00404 \{
00405   \hyperlink{class_bar_properties}{BarProperties} barProperties(\textcolor{keyword}{this});
00406   barProperties.setOptions(project, NULL);
00407 
00408   \textcolor{keywordflow}{if} (barProperties.exec() == QDialog::Accepted) \{
00409     \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00410     ui->systemView->addBar(barProperties.bar());
00411   \}
00412 \}
00413 
00414 \textcolor{comment}{/*******************************************************************************}
00415 \textcolor{comment}{ * Add line action.}
00416 \textcolor{comment}{ ******************************************************************************/}
00417 \textcolor{keywordtype}{void} QuickFlow::on\_actionAddLine\_triggered()
00418 \{
00419   \hyperlink{class_line_properties}{LineProperties} lineProperties(\textcolor{keyword}{this});
00420   lineProperties.setOptions(project, NULL);
00421 
00422   \textcolor{keywordflow}{if} (lineProperties.exec() == QDialog::Accepted) \{
00423     \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00424     ui->systemView->addLine(lineProperties.line());
00425   \}
00426 \}
00427 
00428 \textcolor{comment}{/*******************************************************************************}
00429 \textcolor{comment}{ * Import txt type 1 action.}
00430 \textcolor{comment}{ ******************************************************************************/}
00431 \textcolor{keywordtype}{void} QuickFlow::on\_action\_txt\_type\_1\_triggered()
00432 \{
00433   \textcolor{comment}{// Get file location from user.}
00434   QFileDialog txtFile(\textcolor{keyword}{this});
00435   txtFile.setAcceptMode(QFileDialog::AcceptOpen);
00436   txtFile.setFileMode(QFileDialog::ExistingFile);
00437   txtFile.setNameFilter(tr(\textcolor{stringliteral}{"Text File Type 1(*.txt)"}));
00438   txtFile.setDirectory(QStandardPaths::standardLocations(
00439                          QStandardPaths::HomeLocation)[0]);
00440 
00441   \textcolor{comment}{// Check if user has canceled the opening.}
00442   \textcolor{keywordflow}{if} (txtFile.exec() != QDialog::Accepted) \{
00443     \textcolor{keywordflow}{return};
00444   \}
00445 
00446   \textcolor{comment}{// Grab filename.}
00447   QString fileName = txtFile.selectedFiles()[0];
00448 
00449   \textcolor{comment}{// Check if there is a project already opened.}
00450   \textcolor{keywordflow}{if} (project == NULL) \{
00451     \textcolor{comment}{// Create a new project.}
00452     on\_actionNew\_triggered();
00453 
00454     \textcolor{comment}{// Check if project has been created.}
00455     \textcolor{keywordflow}{if}(project == NULL) \{
00456       \textcolor{comment}{// User canceled, cancel import.}
00457       QMessageBox::critical(\textcolor{keyword}{this}, \textcolor{stringliteral}{"Need a project to import"},
00458                             \textcolor{stringliteral}{"A project is needed in order to import networks."},
00459                             QMessageBox::Ok);
00460       \textcolor{keywordflow}{return};
00461     \}
00462   \}
00463 
00464   \hyperlink{class_network_properties}{NetworkProperties} newNetwork(\textcolor{keyword}{this});
00465   newNetwork.setOptions(project, NULL);
00466 
00467   \textcolor{keywordflow}{if} (newNetwork.exec() == QDialog::Rejected) \{
00468     \textcolor{comment}{// User canceled import, return.}
00469     \textcolor{keywordflow}{return};
00470   \}
00471 
00472   \textcolor{comment}{// Try to import network.}
00473   \hyperlink{class_network}{Network} *network = newNetwork.network();
00474   \textcolor{keywordtype}{bool} importOk = \hyperlink{import_8cpp_ab30ac380d5e14f830ebc8eb839fbbdf0}{importTxtType1}(fileName, network);
00475 
00476   \textcolor{comment}{// Impor success.}
00477   \textcolor{keywordflow}{if}(importOk) \{
00478     ui->systemView->addNetwork(network);
00479     ui->systemView->zoomFit();
00480     \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00481   \} \textcolor{keywordflow}{else} \{
00482     project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}.remove(network->\hyperlink{class_network_ab6643733a517f930c60b06f5ffd78186}{name});
00483     \textcolor{keyword}{delete} network;
00484   \}
00485 \}
00486 
00487 \textcolor{comment}{/*******************************************************************************}
00488 \textcolor{comment}{ * Import txt type 2 action.}
00489 \textcolor{comment}{ ******************************************************************************/}
00490 \textcolor{keywordtype}{void} QuickFlow::on\_action\_txt\_type\_2\_triggered()
00491 \{
00492   \textcolor{comment}{// Get file location from user.}
00493   QFileDialog txtFile(\textcolor{keyword}{this});
00494   txtFile.setAcceptMode(QFileDialog::AcceptOpen);
00495   txtFile.setFileMode(QFileDialog::ExistingFile);
00496   txtFile.setNameFilter(tr(\textcolor{stringliteral}{"Text File Type 1(*.txt)"}));
00497   txtFile.setDirectory(QStandardPaths::standardLocations(
00498                          QStandardPaths::HomeLocation)[0]);
00499 
00500   \textcolor{comment}{// Check if user has canceled the opening.}
00501   \textcolor{keywordflow}{if} (txtFile.exec() != QDialog::Accepted) \{
00502     \textcolor{keywordflow}{return};
00503   \}
00504 
00505   \textcolor{comment}{// Grab filename.}
00506   QString fileName = txtFile.selectedFiles()[0];
00507 
00508   \textcolor{comment}{// Check if there is a project already opened.}
00509   \textcolor{keywordflow}{if} (project == NULL) \{
00510     \textcolor{comment}{// Create a new project.}
00511     on\_actionNew\_triggered();
00512 
00513     \textcolor{comment}{// Check if project has been created.}
00514     \textcolor{keywordflow}{if}(project == NULL) \{
00515       \textcolor{comment}{// User canceled, cancel import.}
00516       QMessageBox::critical(\textcolor{keyword}{this}, \textcolor{stringliteral}{"Need a project to import"},
00517                             \textcolor{stringliteral}{"A project is needed in order to import networks."},
00518                             QMessageBox::Ok);
00519       \textcolor{keywordflow}{return};
00520     \}
00521   \}
00522 
00523   \hyperlink{class_network_properties}{NetworkProperties} newNetwork(\textcolor{keyword}{this});
00524   newNetwork.setOptions(project, NULL);
00525 
00526   \textcolor{keywordflow}{if} (newNetwork.exec() == QDialog::Rejected) \{
00527     \textcolor{comment}{// User canceled import, return.}
00528     \textcolor{keywordflow}{return};
00529   \}
00530 
00531   \textcolor{comment}{// Try to import network.}
00532   \hyperlink{class_network}{Network} *network = newNetwork.network();
00533   \textcolor{keywordtype}{bool} importOk = \hyperlink{import_8cpp_aef466de21b145a0fdf215dd1a6409924}{importTxtType2}(fileName, network);
00534 
00535   \textcolor{comment}{// Impor success.}
00536   \textcolor{keywordflow}{if}(importOk) \{
00537     ui->systemView->addNetwork(network);
00538     ui->systemView->zoomFit();
00539     \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00540   \} \textcolor{keywordflow}{else} \{
00541     project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}.remove(network->\hyperlink{class_network_ab6643733a517f930c60b06f5ffd78186}{name});
00542     \textcolor{keyword}{delete} network;
00543   \}
00544 \}
00545 
00546 \textcolor{comment}{/*******************************************************************************}
00547 \textcolor{comment}{ * Import txt type 3 action.}
00548 \textcolor{comment}{ ******************************************************************************/}
00549 \textcolor{keywordtype}{void} QuickFlow::on\_action\_txt\_type\_3\_triggered()
00550 \{
00551   \textcolor{comment}{// Get file location from user.}
00552   QFileDialog txtFile(\textcolor{keyword}{this});
00553   txtFile.setAcceptMode(QFileDialog::AcceptOpen);
00554   txtFile.setFileMode(QFileDialog::ExistingFile);
00555   txtFile.setNameFilter(tr(\textcolor{stringliteral}{"Text File Type 1(*.txt)"}));
00556   txtFile.setDirectory(QStandardPaths::standardLocations(
00557                          QStandardPaths::HomeLocation)[0]);
00558 
00559   \textcolor{comment}{// Check if user has canceled the opening.}
00560   \textcolor{keywordflow}{if} (txtFile.exec() != QDialog::Accepted) \{
00561     \textcolor{keywordflow}{return};
00562   \}
00563 
00564   \textcolor{comment}{// Grab filename.}
00565   QString fileName = txtFile.selectedFiles()[0];
00566 
00567   \textcolor{comment}{// Check if there is a project already opened.}
00568   \textcolor{keywordflow}{if} (project == NULL) \{
00569     \textcolor{comment}{// Create a new project.}
00570     on\_actionNew\_triggered();
00571 
00572     \textcolor{comment}{// Check if project has been created.}
00573     \textcolor{keywordflow}{if}(project == NULL) \{
00574       \textcolor{comment}{// User canceled, cancel import.}
00575       QMessageBox::critical(\textcolor{keyword}{this}, \textcolor{stringliteral}{"Need a project to import"},
00576                             \textcolor{stringliteral}{"A project is needed in order to import networks."},
00577                             QMessageBox::Ok);
00578       \textcolor{keywordflow}{return};
00579     \}
00580   \}
00581 
00582   \hyperlink{class_network_properties}{NetworkProperties} newNetwork(\textcolor{keyword}{this});
00583   newNetwork.setOptions(project, NULL);
00584 
00585   \textcolor{keywordflow}{if} (newNetwork.exec() == QDialog::Rejected) \{
00586     \textcolor{comment}{// User canceled import, return.}
00587     \textcolor{keywordflow}{return};
00588   \}
00589 
00590   \textcolor{comment}{// Try to import network.}
00591   \hyperlink{class_network}{Network} *network = newNetwork.network();
00592   \textcolor{keywordtype}{bool} importOk = \hyperlink{import_8cpp_acd1a54d4b2a28043b1489f0be7423ecd}{importTxtType3}(fileName, network);
00593 
00594   \textcolor{comment}{// Impor success.}
00595   \textcolor{keywordflow}{if}(importOk) \{
00596     ui->systemView->addNetwork(network);
00597     ui->systemView->zoomFit();
00598     \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00599   \} \textcolor{keywordflow}{else} \{
00600     project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}.remove(network->\hyperlink{class_network_ab6643733a517f930c60b06f5ffd78186}{name});
00601     \textcolor{keyword}{delete} network;
00602   \}
00603 \}
00604 
00605 \textcolor{comment}{/*******************************************************************************}
00606 \textcolor{comment}{ * Cespedes action.}
00607 \textcolor{comment}{ ******************************************************************************/}
00608 \textcolor{keywordtype}{void} QuickFlow::on\_actionCespedes\_triggered()
00609 \{
00610   \textcolor{keywordflow}{if}(ui->actionShirmoharmmadi->isChecked()) \{
00611     ui->actionShirmoharmmadi->setChecked(\textcolor{keyword}{false});
00612   \}
00613 \}
00614 
00615 \textcolor{comment}{/*******************************************************************************}
00616 \textcolor{comment}{ * Shirmoharmmadi action.}
00617 \textcolor{comment}{ ******************************************************************************/}
00618 \textcolor{keywordtype}{void} QuickFlow::on\_actionShirmoharmmadi\_triggered()
00619 \{
00620   \textcolor{keywordflow}{if}(ui->actionCespedes->isChecked()) \{
00621     ui->actionCespedes->setChecked(\textcolor{keyword}{false});
00622   \}
00623 \}
00624 
00625 \textcolor{comment}{/*******************************************************************************}
00626 \textcolor{comment}{ * Sugiyama graph algorithm action.}
00627 \textcolor{comment}{ ******************************************************************************/}
00628 \textcolor{keywordtype}{void} QuickFlow::on\_actionSugiyama\_triggered()
00629 \{
00630 
00631   \textcolor{keywordflow}{foreach}(\hyperlink{class_network}{Network} *network, project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}) \{
00632     \hyperlink{class_redraw_network}{RedrawNetwork} redraw(network);
00633     redraw.sugiyama();
00634   \}
00635 
00636   \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00637   ui->systemView->zoomFit();
00638 \}
00639 
00640 \textcolor{comment}{/*******************************************************************************}
00641 \textcolor{comment}{ * Sugiyama fast graph algorithm action.}
00642 \textcolor{comment}{ ******************************************************************************/}
00643 \textcolor{keywordtype}{void} QuickFlow::on\_actionSugiyama\_Fast\_triggered()
00644 \{
00645   \textcolor{keywordflow}{foreach}(\hyperlink{class_network}{Network} *network, project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}) \{
00646     \hyperlink{class_redraw_network}{RedrawNetwork} redraw(network);
00647     redraw.sugiyamaFast();
00648   \}
00649 
00650   \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00651   ui->systemView->zoomFit();
00652 \}
00653 
00654 \textcolor{comment}{/*******************************************************************************}
00655 \textcolor{comment}{ *  Multi-level graph algorithm action.}
00656 \textcolor{comment}{ ******************************************************************************/}
00657 \textcolor{keywordtype}{void} QuickFlow::on\_actionMulti\_level\_triggered()
00658 \{
00659   \textcolor{keywordflow}{foreach}(\hyperlink{class_network}{Network} *network, project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}) \{
00660     \hyperlink{class_redraw_network}{RedrawNetwork} redraw(network);
00661     redraw.multiLevel();
00662   \}
00663 
00664   \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00665   ui->systemView->zoomFit();
00666 \}
00667 
00668 \textcolor{comment}{/*******************************************************************************}
00669 \textcolor{comment}{ * Search bar action.}
00670 \textcolor{comment}{ ******************************************************************************/}
00671 \textcolor{keywordtype}{void} QuickFlow::on\_actionSearch\_Bar\_triggered()
00672 \{
00673   \hyperlink{class_search_bar}{SearchBar} searchBar(\textcolor{keyword}{this});
00674   searchBar.setOptions(project);
00675 
00676   \textcolor{keywordflow}{if} (searchBar.exec() == QDialog::Accepted) \{
00677 
00678   \}
00679 
00680 
00681 \}
00682 
00683 \textcolor{comment}{/*******************************************************************************}
00684 \textcolor{comment}{ * Run action.}
00685 \textcolor{comment}{ ******************************************************************************/}
00686 \textcolor{keywordtype}{void} QuickFlow::on\_actionRun\_triggered()
00687 \{
00688   \textcolor{keywordflow}{foreach}(\hyperlink{class_network}{Network} *network, project->\hyperlink{class_project_aa98126154cab59769a431668e6f17daf}{networks}) \{
00689     \textcolor{keywordflow}{if}(ui->actionShirmoharmmadi->isChecked()) \{
00690 
00691       \hyperlink{class_shirmoharmmadi}{Shirmoharmmadi} fluxo(network);
00692       fluxo.solve();
00693 
00694       QMessageBox::information(\textcolor{keyword}{this}, \textcolor{stringliteral}{"Duration"},
00695                                \textcolor{stringliteral}{"Simulation duration: "} +
00696                                QString::number(fluxo.duration) + \textcolor{stringliteral}{" [ms] \(\backslash\)n"} +
00697                                \textcolor{stringliteral}{"Used iterations: "} + QString::number(fluxo.usedIterations),
00698                                QMessageBox::Ok);
00699     \} \textcolor{keywordflow}{else} \{
00700       \hyperlink{class_shirmoharmmadi}{Shirmoharmmadi} fluxo(network);
00701       QMessageBox::information(\textcolor{keyword}{this}, \textcolor{stringliteral}{"Duration"},
00702                                \textcolor{stringliteral}{"Simulation duration: "} +
00703                                QString::number(fluxo.duration) + \textcolor{stringliteral}{" [ms] \(\backslash\)n"} +
00704                                \textcolor{stringliteral}{"Used iterations: "} + QString::number(fluxo.usedIterations),
00705                                QMessageBox::Ok);
00706     \}
00707   \}
00708 
00709   \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00710 \}
00711 
00712 \textcolor{comment}{/*******************************************************************************}
00713 \textcolor{comment}{ * About action.}
00714 \textcolor{comment}{ ******************************************************************************/}
00715 \textcolor{keywordtype}{void} QuickFlow::on\_actionAbout\_triggered()
00716 \{
00717   \hyperlink{class_about}{About} about(\textcolor{keyword}{this});
00718   about.exec();
00719 \}
00720 
00721 \textcolor{keywordtype}{void} QuickFlow::on\_editBar(QObject *bar)
00722 \{
00723   \hyperlink{class_bar_properties}{BarProperties} barProperties(\textcolor{keyword}{this});
00724   barProperties.setOptions(project, static\_cast<Bar *>(bar));
00725 
00726   \textcolor{keywordflow}{if} (barProperties.exec() == QDialog::Accepted) \{
00727     \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00728   \}
00729 \}
00730 
00731 \textcolor{keywordtype}{void} QuickFlow::on\_editLine(QObject *line)
00732 \{
00733   \hyperlink{class_line_properties}{LineProperties} lineProperties(\textcolor{keyword}{this});
00734   lineProperties.setOptions(project, static\_cast<Line *>(line));
00735 
00736   \textcolor{keywordflow}{if} (lineProperties.exec() == QDialog::Accepted) \{
00737     \hyperlink{group___window_ga4b63ea5ca52a9eea14db0a22b5a133f8}{setAltered}(\textcolor{keyword}{true});
00738   \}
00739 \}
00740 
00741 \textcolor{comment}{/*******************************************************************************}
00742 \textcolor{comment}{ * Close event.}
00743 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{quickflow_8cpp_source_l00744}{}\hyperlink{group___window_gac8cc1bb329961a0781ffed7b6f2ab402}{00744} \textcolor{keywordtype}{void} \hyperlink{group___window_gac8cc1bb329961a0781ffed7b6f2ab402}{QuickFlow::closeEvent}(QCloseEvent *event)
00745 \{
00746   \textcolor{comment}{// Hook to application exit.}
00747   \textcolor{comment}{// Check for unsaved changes.}
00748   \textcolor{keywordflow}{if} (altered\_) \{
00749     \textcolor{comment}{// Try to close project, saving the changes.}
00750     ui->actionClose->trigger();
00751 
00752     \textcolor{comment}{// Check for a  cancel}
00753     \textcolor{keywordflow}{if} (altered\_) \{
00754       \textcolor{comment}{// User doesnt want to quit}
00755       \textcolor{keyword}{event}->ignore();
00756       \textcolor{keywordflow}{return};
00757     \}
00758   \}
00759 
00760   saveSettings();
00761   \textcolor{keyword}{event}->accept();
00762 \}
00763 
00764 \textcolor{comment}{/*******************************************************************************}
00765 \textcolor{comment}{ * Load application settings.}
00766 \textcolor{comment}{ ******************************************************************************/}
00767 \textcolor{keywordtype}{void} QuickFlow::loadSettings()
00768 \{
00769   \textcolor{comment}{// systemView background.}
00770   QBrush bkbrush;
00771   bkbrush.setColor(settings->value(\textcolor{stringliteral}{"systemView\_background"}).value<QColor>());
00772   bkbrush.setStyle(Qt::SolidPattern);
00773   ui->systemView->setBackgroundBrush(bkbrush);
00774 \}
00775 
00776 \textcolor{comment}{/*******************************************************************************}
00777 \textcolor{comment}{ * Save application settings.}
00778 \textcolor{comment}{ ******************************************************************************/}
00779 \textcolor{keywordtype}{void} QuickFlow::saveSettings()
00780 \{
00781   \textcolor{comment}{// systemView background.}
00782   settings->setValue(\textcolor{stringliteral}{"systemView\_background"}, ui->systemView->backgroundBrush());
00783 
00784   \textcolor{comment}{// Save settings.}
00785   settings->sync();
00786 \}
00787 
00788 \textcolor{comment}{/*******************************************************************************}
00789 \textcolor{comment}{ * Create application settings.}
00790 \textcolor{comment}{ ******************************************************************************/}
00791 \textcolor{keywordtype}{void} QuickFlow::createSettings()
00792 \{
00793   \textcolor{comment}{// Save version.}
00794   settings->setValue(\textcolor{stringliteral}{"version"}, \hyperlink{group___window_gabfc3b1280bdae9a9c046d56b1459ab99}{kVersion});
00795 
00796 \textcolor{comment}{//  systemView background.}
00797   QBrush bkbrush;
00798   bkbrush.setColor(Qt::white);
00799   bkbrush.setStyle(Qt::SolidPattern);
00800   ui->systemView->setBackgroundBrush(bkbrush);
00801 
00802   \textcolor{comment}{// Store settings.}
00803   saveSettings();
00804 \}
00805 
00806 \textcolor{comment}{/*******************************************************************************}
00807 \textcolor{comment}{ * Upgrade application settings.}
00808 \textcolor{comment}{ ******************************************************************************/}
00809 \textcolor{keywordtype}{void} QuickFlow::upgradeSettings()
00810 \{
00811   \textcolor{comment}{// Remove everything and create a default.}
00812   settings->clear();
00813   createSettings();
00814 \}
00815 
00816 \textcolor{comment}{/*******************************************************************************}
00817 \textcolor{comment}{ * No project interface.}
00818 \textcolor{comment}{ ******************************************************************************/}
00819 \textcolor{keywordtype}{void} QuickFlow::noProjectInterface()
00820 \{
00821   \textcolor{comment}{// Project actions.}
00822   ui->actionNew->setEnabled(\textcolor{keyword}{true});
00823   ui->actionOpen->setEnabled(\textcolor{keyword}{true});
00824   ui->actionSave->setEnabled(\textcolor{keyword}{false});
00825   ui->actionSave\_as->setEnabled(\textcolor{keyword}{false});
00826   ui->actionClose->setEnabled(\textcolor{keyword}{false});
00827   ui->actionSettings->setEnabled(\textcolor{keyword}{false});
00828 
00829   \textcolor{comment}{// Simulation actions.}
00830   ui->actionRun->setEnabled(\textcolor{keyword}{false});
00831   ui->actionExport->setEnabled(\textcolor{keyword}{false});
00832 
00833   \textcolor{comment}{// Zoom actions.}
00834   ui->actionZoomFit->setEnabled(\textcolor{keyword}{false});
00835   ui->actionZoomIn->setEnabled(\textcolor{keyword}{false});
00836   ui->actionZoomOut->setEnabled(\textcolor{keyword}{false});
00837 
00838   \textcolor{comment}{// Power network actions}
00839   ui->actionAdd\_Network->setEnabled(\textcolor{keyword}{false});
00840   ui->actionAddBar->setEnabled(\textcolor{keyword}{false});
00841   ui->actionAddLine->setEnabled(\textcolor{keyword}{false});
00842   ui->actionSearch\_Bar->setEnabled(\textcolor{keyword}{false});
00843 
00844   \textcolor{comment}{// Algorithms actions.}
00845   ui->actionShirmoharmmadi->setEnabled(\textcolor{keyword}{false});
00846   ui->actionCespedes->setEnabled(\textcolor{keyword}{false});
00847   ui->actionSugiyama->setEnabled(\textcolor{keyword}{false});
00848   ui->actionSugiyama\_Fast->setEnabled(\textcolor{keyword}{false});
00849   ui->actionMulti\_level->setEnabled(\textcolor{keyword}{false});
00850 
00851   \textcolor{comment}{// Disable viewer.}
00852   ui->systemView->setEnabled(\textcolor{keyword}{false});
00853 \}
00854 
00855 \textcolor{comment}{/*******************************************************************************}
00856 \textcolor{comment}{ * Work interface.}
00857 \textcolor{comment}{ ******************************************************************************/}
00858 \textcolor{keywordtype}{void} QuickFlow::workInterface()
00859 \{
00860   \textcolor{comment}{// Project actions.}
00861   ui->actionNew->setEnabled(\textcolor{keyword}{true});
00862   ui->actionOpen->setEnabled(\textcolor{keyword}{true});
00863   ui->actionSave->setEnabled(\textcolor{keyword}{false});
00864   ui->actionSave\_as->setEnabled(\textcolor{keyword}{true});
00865   ui->actionClose->setEnabled(\textcolor{keyword}{true});
00866   ui->actionSettings->setEnabled(\textcolor{keyword}{true});
00867 
00868   \textcolor{comment}{// Simulation actions.}
00869   ui->actionRun->setEnabled(\textcolor{keyword}{true});
00870   ui->actionExport->setEnabled(\textcolor{keyword}{true});
00871 
00872   \textcolor{comment}{// Zoom actions.}
00873   ui->actionZoomFit->setEnabled(\textcolor{keyword}{true});
00874   ui->actionZoomIn->setEnabled(\textcolor{keyword}{true});
00875   ui->actionZoomOut->setEnabled(\textcolor{keyword}{true});
00876 
00877   \textcolor{comment}{// Power network actions}
00878   ui->actionAdd\_Network->setEnabled(\textcolor{keyword}{true});
00879   ui->actionAddBar->setEnabled(\textcolor{keyword}{true});
00880   ui->actionAddLine->setEnabled(\textcolor{keyword}{true});
00881   ui->actionSearch\_Bar->setEnabled(\textcolor{keyword}{true});
00882 
00883   \textcolor{comment}{// Algorithms actions.}
00884   ui->actionShirmoharmmadi->setEnabled(\textcolor{keyword}{true});
00885   ui->actionCespedes->setEnabled(\textcolor{keyword}{true});
00886   ui->actionSugiyama->setEnabled(\textcolor{keyword}{true});
00887   ui->actionSugiyama\_Fast->setEnabled(\textcolor{keyword}{true});
00888   ui->actionMulti\_level->setEnabled(\textcolor{keyword}{true});
00889 
00890   \textcolor{comment}{// Enable viewer}
00891   ui->systemView->setEnabled(\textcolor{keyword}{true});
00892 \}
00893 
00894 \textcolor{comment}{/*******************************************************************************}
00895 \textcolor{comment}{ * Connect Signals.}
00896 \textcolor{comment}{ ******************************************************************************/}
00897 \textcolor{keywordtype}{void} QuickFlow::connectSignals()
00898 \{
00899   connect(ui->systemView, SIGNAL(barProperties(QObject *)), \textcolor{keyword}{this},
00900           SLOT(on\_editBar(QObject *)));
00901 
00902   connect(ui->systemView, SIGNAL(lineProperties(QObject *)), \textcolor{keyword}{this},
00903           SLOT(on\_editLine(QObject *)));
00904 \}
00905 
00906 \textcolor{comment}{/*******************************************************************************}
00907 \textcolor{comment}{ * Disconnect Signals.}
00908 \textcolor{comment}{ ******************************************************************************/}
00909 \textcolor{keywordtype}{void} QuickFlow::disconnectSignals()
00910 \{
00911   disconnect(ui->systemView, SIGNAL(barProperties(QObject *)), \textcolor{keyword}{this},
00912              SLOT(on\_editBar(QObject *)));
00913 
00914   disconnect(ui->systemView, SIGNAL(lineProperties(QObject *)), \textcolor{keyword}{this},
00915              SLOT(on\_editLine(QObject *)));
00916 \}
00917 
\end{DoxyCode}
