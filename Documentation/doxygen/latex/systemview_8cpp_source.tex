\hypertarget{systemview_8cpp_source}{}\subsection{systemview.\+cpp}
\label{systemview_8cpp_source}\index{systemview.\+cpp@{systemview.\+cpp}}

\begin{DoxyCode}
00001 \textcolor{comment}{/*}
00002 \textcolor{comment}{ * The MIT License (MIT)}
00003 \textcolor{comment}{ *}
00004 \textcolor{comment}{ * Copyright (c) 2015 David Krepsky}
00005 \textcolor{comment}{ *}
00006 \textcolor{comment}{ * Permission is hereby granted, free of charge, to any person obtaining a copy}
00007 \textcolor{comment}{ * of this software and associated documentation files (the "Software"), to deal}
00008 \textcolor{comment}{ * in the Software without restriction, including without limitation the rights}
00009 \textcolor{comment}{ * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell}
00010 \textcolor{comment}{ * copies of the Software, and to permit persons to whom the Software is}
00011 \textcolor{comment}{ * furnished to do so, subject to the following conditions:}
00012 \textcolor{comment}{ *}
00013 \textcolor{comment}{ * The above copyright notice and this permission notice shall be included in}
00014 \textcolor{comment}{ * all copies or substantial portions of the Software.}
00015 \textcolor{comment}{ *}
00016 \textcolor{comment}{ * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR}
00017 \textcolor{comment}{ * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,}
00018 \textcolor{comment}{ * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE}
00019 \textcolor{comment}{ * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER}
00020 \textcolor{comment}{ * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,}
00021 \textcolor{comment}{ * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE}
00022 \textcolor{comment}{ * SOFTWARE.}
00023 \textcolor{comment}{ */}
00024 
00043 \textcolor{preprocessor}{#include "\hyperlink{barproperties_8h}{window/barproperties.h}"}
00044 \textcolor{preprocessor}{#include "\hyperlink{lineproperties_8h}{window/lineproperties.h}"}
00045 
00046 \textcolor{preprocessor}{#include "\hyperlink{systemview_8h}{graphics/systemview.h}"}
00047 \textcolor{preprocessor}{#include <QColor>}
00048 \textcolor{preprocessor}{#include <QBrush>}
00049 
00050 \textcolor{keyword}{const} qreal SystemView::kZoomStep = 0.05;
00051 
00052 \textcolor{comment}{/*******************************************************************************}
00053 \textcolor{comment}{ * Constructor.}
00054 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00055}{}\hyperlink{group___graphics_ga660a455ff7b98cb92410b0bf1cbb2eeb}{00055} \hyperlink{group___graphics_ga660a455ff7b98cb92410b0bf1cbb2eeb}{SystemView::SystemView}(QWidget *parent) :
00056   QGraphicsView(parent)
00057 \{
00058   setDragMode(RubberBandDrag);
00059   \textcolor{comment}{// Enable antialiasing}
00060   setRenderHints(QPainter::Antialiasing | QPainter::SmoothPixmapTransform);
00061 \}
00062 
00063 \textcolor{comment}{/*******************************************************************************}
00064 \textcolor{comment}{ * Destructor.}
00065 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00066}{}\hyperlink{group___graphics_ga0091352981c1efa5498819b69698db44}{00066} \hyperlink{group___graphics_ga0091352981c1efa5498819b69698db44}{SystemView::~SystemView}()
00067 \{
00068 
00069 \}
00070 
00071 \textcolor{comment}{/*******************************************************************************}
00072 \textcolor{comment}{ * zoomIn.}
00073 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00074}{}\hyperlink{group___graphics_ga93170319ee5fbf9098353b383fc8a368}{00074} \textcolor{keywordtype}{void} \hyperlink{group___graphics_ga93170319ee5fbf9098353b383fc8a368}{SystemView::zoomIn}()
00075 \{
00076   scale(1.0 + kZoomStep, 1.0 + kZoomStep);
00077 \}
00078 
00079 \textcolor{comment}{/*******************************************************************************}
00080 \textcolor{comment}{ * zoomOut.}
00081 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00082}{}\hyperlink{group___graphics_gaf971471c76265ec21cdde2aafe9b609f}{00082} \textcolor{keywordtype}{void} \hyperlink{group___graphics_gaf971471c76265ec21cdde2aafe9b609f}{SystemView::zoomOut}()
00083 \{
00084   scale(1.0 - kZoomStep, 1.0 - kZoomStep);
00085 \}
00086 
00087 \textcolor{comment}{/*******************************************************************************}
00088 \textcolor{comment}{ * zoomFit.}
00089 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00090}{}\hyperlink{group___graphics_gac1bf0b6a80216df74a8da1cb8ac5f0e8}{00090} \textcolor{keywordtype}{void} \hyperlink{group___graphics_gac1bf0b6a80216df74a8da1cb8ac5f0e8}{SystemView::zoomFit}()
00091 \{
00092   fitInView(sceneRect(), Qt::KeepAspectRatio);
00093 \}
00094 
00095 \textcolor{comment}{/*******************************************************************************}
00096 \textcolor{comment}{ * addNetwork.}
00097 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00098}{}\hyperlink{group___graphics_gae183447d0777c7b2b940a977f9b64c3f}{00098} \textcolor{keywordtype}{void} \hyperlink{group___graphics_gae183447d0777c7b2b940a977f9b64c3f}{SystemView::addNetwork}(\hyperlink{class_network}{Network} *network)
00099 \{
00100 \textcolor{comment}{//  setScene(network);}
00101 \}
00102 
00103 \textcolor{comment}{/*******************************************************************************}
00104 \textcolor{comment}{ * removeNetwork.}
00105 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00106}{}\hyperlink{group___graphics_ga2078ad08ff93b9a8683d567e3f9f714e}{00106} \textcolor{keywordtype}{void} \hyperlink{group___graphics_ga2078ad08ff93b9a8683d567e3f9f714e}{SystemView::removeNetwork}(\hyperlink{class_network}{Network} *network)
00107 \{
00108   setScene(NULL);
00109   \textcolor{keyword}{delete} network;
00110   network = NULL;
00111 \}
00112 
00113 \textcolor{comment}{/*******************************************************************************}
00114 \textcolor{comment}{ * wheelEvent.}
00115 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00116}{}\hyperlink{group___graphics_gaab2fa6cebf9022eb6bf31497c0789675}{00116} \textcolor{keywordtype}{void} \hyperlink{group___graphics_gaab2fa6cebf9022eb6bf31497c0789675}{SystemView::wheelEvent}(QWheelEvent *event)
00117 \{
00118   setTransformationAnchor(QGraphicsView::AnchorUnderMouse);
00119 
00120   \textcolor{keywordflow}{if} (event->delta() > 0) \{
00121     scale(1.0 + kZoomStep, 1.0 + kZoomStep);
00122   \} \textcolor{keywordflow}{else} \{
00123     scale(1.0 - kZoomStep, 1.0 - kZoomStep);
00124   \}
00125 \}
00126 
00127 \textcolor{comment}{/*******************************************************************************}
00128 \textcolor{comment}{ * mouseMoveEvent.}
00129 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00130}{}\hyperlink{group___graphics_gab19e233cd697852dd71140971cb6e122}{00130} \textcolor{keywordtype}{void} \hyperlink{group___graphics_gab19e233cd697852dd71140971cb6e122}{SystemView::mouseMoveEvent}(QMouseEvent *event)
00131 \{
00132   \textcolor{keywordflow}{if} (event->buttons().testFlag(Qt::MidButton)) \{
00133     QScrollBar *hBar = horizontalScrollBar();
00134     QScrollBar *vBar = verticalScrollBar();
00135     QPoint delta = \textcolor{keyword}{event}->pos() - oldPos;
00136     oldPos = \textcolor{keyword}{event}->pos();
00137     hBar->setValue(hBar->value() + (isRightToLeft() ? delta.x() : -delta.x()));
00138     vBar->setValue(vBar->value() - delta.y());
00139   \}
00140 
00141   QGraphicsView::mouseMoveEvent(event);
00142 \}
00143 
00144 \textcolor{comment}{/*******************************************************************************}
00145 \textcolor{comment}{ * mousePressEvent.}
00146 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00147}{}\hyperlink{group___graphics_ga42d4a485d6d9bd891d9505a5213cf783}{00147} \textcolor{keywordtype}{void} \hyperlink{group___graphics_ga42d4a485d6d9bd891d9505a5213cf783}{SystemView::mousePressEvent}(QMouseEvent *event)
00148 \{
00149   \textcolor{keywordflow}{if}(event->button() == Qt::MidButton) \{
00150     oldPos = \textcolor{keyword}{event}->pos();
00151     setDragMode(NoDrag);
00152     setCursor(Qt::OpenHandCursor);
00153   \}
00154 
00155   QGraphicsView::mousePressEvent(event);
00156 \}
00157 
00158 \textcolor{comment}{/*******************************************************************************}
00159 \textcolor{comment}{ * mouseReleaseEvent.}
00160 \textcolor{comment}{ ******************************************************************************/}
\hypertarget{systemview_8cpp_source_l00161}{}\hyperlink{group___graphics_gaa8a2664405194bbe29daa454aead7416}{00161} \textcolor{keywordtype}{void} \hyperlink{group___graphics_gaa8a2664405194bbe29daa454aead7416}{SystemView::mouseReleaseEvent}(QMouseEvent *event)
00162 \{
00163   \textcolor{keywordflow}{if}(event->button() == Qt::MidButton) \{
00164     setDragMode(RubberBandDrag);
00165     setCursor(Qt::ArrowCursor);
00166   \}
00167 
00168   QGraphicsView::mouseReleaseEvent(event);
00169 \}
00170 
00171 \textcolor{comment}{/*******************************************************************************}
00172 \textcolor{comment}{ * Connect Signals.}
00173 \textcolor{comment}{ ******************************************************************************/}
00174 \textcolor{comment}{//void QuickFlow::connectSignals()}
00175 \textcolor{comment}{//\{}
00176 \textcolor{comment}{//  connect(project->network, SIGNAL(barProperties(QObject *)), this,}
00177 \textcolor{comment}{//          SLOT(on\_editBar(QObject *)));}
00178 
00179 \textcolor{comment}{//  connect(project->network, SIGNAL(lineProperties(QObject *)), this,}
00180 \textcolor{comment}{//          SLOT(on\_editLine(QObject *)));}
00181 \textcolor{comment}{//\}}
00182 
00184 \textcolor{comment}{// * Disconnect Signals.}
00185 \textcolor{comment}{// ******************************************************************************/}
00186 \textcolor{comment}{//void QuickFlow::disconnectSignals()}
00187 \textcolor{comment}{//\{}
00188 \textcolor{comment}{//  disconnect(project->network, SIGNAL(barProperties(QObject *)), this,}
00189 \textcolor{comment}{//             SLOT(on\_editBar(QObject *)));}
00190 
00191 \textcolor{comment}{//  disconnect(project->network, SIGNAL(lineProperties(QObject *)), this,}
00192 \textcolor{comment}{//             SLOT(on\_editLine(QObject *)));}
00193 \textcolor{comment}{//\}}
00194 
00195 
00196 \textcolor{comment}{/*******************************************************************************}
00197 \textcolor{comment}{ * Bar Double Click.}
00198 \textcolor{comment}{ ******************************************************************************/}
00199 \textcolor{comment}{//void QuickFlow::on\_editBar(QObject *bar)}
00200 \textcolor{comment}{//\{}
00201 \textcolor{comment}{//  BarProperties barProperties(this);}
00202 \textcolor{comment}{//  barProperties.setOptions(project, static\_cast<Bar *>(bar));}
00203 
00204 \textcolor{comment}{//  if (barProperties.exec() == QDialog::Accepted) \{}
00205 \textcolor{comment}{//    setAltered(true);}
00206 \textcolor{comment}{//  \}}
00207 \textcolor{comment}{//\}}
00208 
00210 \textcolor{comment}{// * Line Double Click.}
00211 \textcolor{comment}{// ******************************************************************************/}
00212 \textcolor{comment}{//void QuickFlow::on\_editLine(QObject *line)}
00213 \textcolor{comment}{//\{}
00214 \textcolor{comment}{//  LineProperties lineProperties(this);}
00215 \textcolor{comment}{//  lineProperties.setOptions(project, static\_cast<Line *>(line));}
00216 
00217 \textcolor{comment}{//  if (lineProperties.exec() == QDialog::Accepted) \{}
00218 \textcolor{comment}{//    setAltered(true);}
00219 \textcolor{comment}{//  \}}
00220 \textcolor{comment}{//\}}
\end{DoxyCode}
